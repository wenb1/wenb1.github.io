---


layout: post
title: Java并发(Concurrency)之线程协作(Cooperation)
categories: Java
description: 讲解Java的线程协作
keywords: Java, Concurrency, 并发, 线程协作, Cooperation
---

两个线程的共享资源可以使用互斥保护起来，一次只允许一个线程访问资源。接下来，就是如何使线程之间协作，多个线程一起来解决问题。有时候，一个线程的执行依赖于其它线程。就好比炒菜，要先洗菜，切菜，最后才能炒，如果使用多线程的方式来解决这个问题，就涉及到线程间的协作。

线程间的协作也是通过互斥实现的，互斥也保证了只有一个线程可以响应信号量。这样就消除了竞争条件(race condition)。在互斥之上，我们引入一个挂起线程的方式，直到某个状态改变，挂起的线程才会恢复运行。

# 1. `wait()`

`wait()`方法可以使线程等待方法之外的条件改变。一般这个条件会被另一个线程改变。

等待有两种形式：**忙等待(busy waiting)**和**阻塞等待(blocking)**

**忙等待**是指线程占有CPU资源，一直测试某个条件，看是否符合条件。而**阻塞等待**会挂起线程不会占用CPU资源。

我们使用`wait()`方法实现阻塞等待，挂起线程等待满足条件。只有使用`notify()`或者`notifyAll()`唤醒线程，线程才会继续工作。